<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Selector Test - Radian</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: white;
        }
        
        .track-selector {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #2a2a2a;
            border-radius: 5px;
            border: 1px solid #444;
        }
        
        .track-selector label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .track-selector select {
            width: 200px;
            padding: 8px;
            background-color: #333;
            color: white;
            border: 1px solid #555;
            border-radius: 3px;
        }
        
        .track-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #2a2a2a;
            border-radius: 5px;
            border: 1px solid #444;
        }
        
        .track-container {
            position: relative;
            width: 100%;
            height: 400px;
            border: 2px solid #333;
            overflow: hidden;
            background-color: #000;
            margin-top: 20px;
        }
        
        #trackSvg {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <h1>Track Selector Test</h1>
    
    <div class="track-selector">
        <label for="trackSelect">Select Track:</label>
        <select id="trackSelect" onchange="switchTrack()">
            <option value="ring-vln">Ring VLN (NÃ¼rburgring Nordschleife)</option>
            <option value="indianapolis-road">Indy Road (Indianapolis Motor Speedway)</option>
        </select>
    </div>
    
    <div class="track-info" id="trackInfo">
        <h3 id="trackName">Track Name</h3>
        <p><strong>Country:</strong> <span id="trackCountry">--</span></p>
        <p><strong>Length:</strong> <span id="trackLength">--</span> km</p>
        <p><strong>Corners:</strong> <span id="trackCorners">--</span></p>
    </div>
    
    <div class="track-container">
        <svg id="trackSvg" xmlns="http://www.w3.org/2000/svg">
            <!-- Track will be loaded here -->
        </svg>
    </div>

    <!-- Load track data -->
    <script src="track-data.js"></script>
    
    <script>
        let currentTrack = 'ring-vln';
        
        function updateTrackInfo(trackData) {
            document.getElementById('trackName').textContent = trackData.name;
            document.getElementById('trackCountry').textContent = trackData.country;
            document.getElementById('trackLength').textContent = trackData.length;
            document.getElementById('trackCorners').textContent = '--';
        }
        
        function loadTrackSVG(trackData) {
            const svg = document.getElementById('trackSvg');
            
            // Clear existing content
            svg.innerHTML = '';
            
            // Set SVG attributes
            svg.setAttribute('viewBox', trackData.svg.viewBox);
            svg.setAttribute('width', trackData.svg.width);
            svg.setAttribute('height', trackData.svg.height);
            
            // Create track path
            const trackPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            trackPath.setAttribute('d', trackData.svg.trackPath);
            trackPath.setAttribute('fill', 'none');
            trackPath.setAttribute('stroke', '#ffffff');
            trackPath.setAttribute('stroke-width', '1.14643');
            svg.appendChild(trackPath);
            
            // Create start/finish line
            const startFinish = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            startFinish.setAttribute('x', trackData.svg.startFinish.x);
            startFinish.setAttribute('y', trackData.svg.startFinish.y);
            startFinish.setAttribute('width', trackData.svg.startFinish.width);
            startFinish.setAttribute('height', trackData.svg.startFinish.height);
            startFinish.setAttribute('fill', '#ff0000');
            svg.appendChild(startFinish);
            
            console.log('Track loaded:', trackData.name);
        }
        
        function switchTrack() {
            const selector = document.getElementById('trackSelect');
            const selectedTrackId = selector.value;
            
            if (selectedTrackId === currentTrack) return;
            
            const trackData = getTrackData(selectedTrackId);
            if (!trackData) {
                console.error('Track data not found for:', selectedTrackId);
                return;
            }
            
            currentTrack = selectedTrackId;
            updateTrackInfo(trackData);
            loadTrackSVG(trackData);
            
            console.log('Switched to track:', selectedTrackId);
        }
        
        // Initialize with default track
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Available tracks:', getAvailableTracks());
            switchTrack();
        });
    </script>
</body>
</html>